# PlantUML図表作成サービス 画面設計書

## 1. 画面一覧と遷移図

### 1.1 画面一覧

| No | 画面名 | URL | 認証 | 説明 |
|----|--------|-----|------|------|
| 1 | ランディングページ | / | 不要 | サービス紹介、ゲスト利用開始 |
| 2 | ログイン | /login | 不要 | ユーザーログイン |
| 3 | 新規登録 | /register | 不要 | ユーザー登録 |
| 4 | パスワードリセット | /forgot-password | 不要 | パスワード再設定 |
| 5 | ダッシュボード | /dashboard | 必要 | プロジェクト一覧、活動履歴 |
| 6 | エディタ（ゲスト） | /editor | 不要 | ゲスト用エディタ |
| 7 | エディタ（認証済み） | /projects/{id}/editor | 必要 | プロジェクト内エディタ |
| 8 | プロジェクト管理 | /projects/{id} | 必要 | プロジェクト詳細・図表一覧 |
| 9 | プラクティス一覧 | /practice | 不要 | 練習問題一覧 |
| 10 | プラクティス問題 | /practice/{id} | 不要 | 個別の練習問題 |
| 11 | チートシート | /cheatsheet | 不要 | PlantUML構文リファレンス |
| 12 | 設定 | /settings | 必要 | ユーザー設定 |
| 13 | プロフィール | /profile | 必要 | プロフィール編集 |

### 1.2 画面遷移図

```
[ランディングページ] 
    ├─> [ゲストで始める] -> [エディタ（ゲスト）]
    ├─> [ログイン] -> [ダッシュボード]
    ├─> [新規登録] -> [ダッシュボード]
    └─> [プラクティス] -> [プラクティス一覧]

[ダッシュボード]
    ├─> [新規プロジェクト] -> [プロジェクト管理]
    ├─> [既存プロジェクト] -> [プロジェクト管理]
    ├─> [設定] -> [設定画面]
    └─> [プロフィール] -> [プロフィール画面]

[プロジェクト管理]
    ├─> [新規図表] -> [エディタ（認証済み）]
    └─> [既存図表] -> [エディタ（認証済み）]
```

## 2. 画面詳細設計

### 2.1 ランディングページ（/）

#### レイアウト構成
```
┌─────────────────────────────────────────────────┐
│  [Logo] PlantUML Editor    [Practice] [Login]  │ <- ヘッダー
├─────────────────────────────────────────────────┤
│                                                 │
│        テキストから図表を簡単作成               │ <- ヒーローセクション
│         PlantUMLエディタサービス               │
│                                                 │
│    [ゲストで始める]  [無料登録]               │
│                                                 │
├─────────────────────────────────────────────────┤
│   ■ 特徴                                       │ <- 特徴セクション
│   ・リアルタイムプレビュー                     │
│   ・多様な図表タイプ対応                       │
│   ・プロジェクト管理（登録ユーザー）           │
│                                                 │
├─────────────────────────────────────────────────┤
│   ■ 対応図表                                   │ <- 対応図表セクション
│   [クラス図] [シーケンス図] [ER図] [他...]     │
│                                                 │
└─────────────────────────────────────────────────┘
```

#### 必要な要素
- ヒーローセクション（キャッチコピー、CTA）
- 特徴説明（3-4項目）
- 対応図表タイプの紹介
- ゲスト利用と登録の選択

### 2.2 ダッシュボード（/dashboard）

#### レイアウト構成
```
┌─────────────────────────────────────────────────┐
│ [Logo] PlantUML Editor   [User Menu ▼]         │ <- ヘッダー
├─────────────────────────────────────────────────┤
│                                                 │
│  こんにちは、{username}さん                    │
│                                                 │
│ ┌─────────────────────────────────────────┐   │
│ │ プロジェクト (2/3)  [新規プロジェクト+]  │   │ <- プロジェクトセクション
│ ├─────────────────────────────────────────┤   │
│ │ ■ プロジェクトA                         │   │
│ │   図表: 5/10  最終更新: 2日前           │   │
│ │   [開く] [編集] [削除]                  │   │
│ │                                          │   │
│ │ ■ プロジェクトB                         │   │
│ │   図表: 3/10  最終更新: 1週間前         │   │
│ │   [開く] [編集] [削除]                  │   │
│ └─────────────────────────────────────────┘   │
│                                                 │
│ ┌─────────────────────────────────────────┐   │
│ │ 最近の活動                              │   │ <- 活動履歴セクション
│ ├─────────────────────────────────────────┤   │
│ │ • クラス図を作成 - 1時間前              │   │
│ │ • ER図を更新 - 3時間前                  │   │
│ │ • プロジェクトAを作成 - 昨日            │   │
│ └─────────────────────────────────────────┘   │
│                                                 │
│ ┌─────────────────────────────────────────┐   │
│ │ プラクティス進捗                        │   │ <- 進捗セクション
│ ├─────────────────────────────────────────┤   │
│ │ 初級: ████████░░ 80%                   │   │
│ │ 中級: ███░░░░░░░ 30%                   │   │
│ │ 上級: ░░░░░░░░░░ 0%                    │   │
│ │                [プラクティスへ]         │   │
│ └─────────────────────────────────────────┘   │
└─────────────────────────────────────────────────┘
```

#### 必要な要素
- プロジェクト一覧（カード形式）
- 各プロジェクトの統計情報
- 最近の活動履歴（5-10件）
- プラクティス進捗状況
- クイックアクション（新規作成など）

### 2.3 エディタ画面（/editor または /projects/{id}/editor）

#### レイアウト構成
```
┌─────────────────────────────────────────────────────────────┐
│ [Logo] {Project Name}  [Save] [Export▼] [Settings] [User▼] │ <- ツールバー
├─────────────────────────────────────────────────────────────┤
│ [New] [Open▼] [Templates▼] [CheatSheet] [History]          │ <- アクションバー
├────────────────────────┬────────────────────────────────────┤
│                        │                                    │
│  PlantUML Code Editor  │     Preview Area                  │
│  (Monaco Editor)       │                                    │
│                        │  ┌──────────────────┐             │
│  @startuml             │  │                  │             │
│  class User {          │  │   [Generated     │             │
│    +name: String       │  │    Diagram]      │             │
│    +email: String      │  │                  │             │
│  }                     │  │                  │             │
│  @enduml               │  └──────────────────┘             │
│                        │                                    │
│                        │  [PNG] [SVG] [TXT]                 │ <- エクスポートボタン
│                        │                                    │
├────────────────────────┴────────────────────────────────────┤
│ Status: Ready | Characters: 58/10000 | Auto-save: ON       │ <- ステータスバー
└─────────────────────────────────────────────────────────────┘
```

#### レスポンシブ対応
- **デスクトップ**: 左右分割レイアウト（50:50）
- **タブレット**: 左右分割レイアウト（40:60）
- **モバイル**: タブ切り替え式（エディタ/プレビュー）

#### 必要な要素
- Monaco Editor（シンタックスハイライト付き）
- リアルタイムプレビューエリア
- ツールバー（保存、エクスポート、設定）
- テンプレート選択
- ステータスバー（文字数、自動保存状態）

### 2.4 プロジェクト管理画面（/projects/{id}）

#### レイアウト構成
```
┌─────────────────────────────────────────────────┐
│ [Logo] PlantUML Editor         [User Menu ▼]   │
├─────────────────────────────────────────────────┤
│ [← Dashboard]                                   │
│                                                 │
│  プロジェクト: {Project Name}                   │
│  説明: {Project Description}                    │
│  [編集] [削除]                                  │
│                                                 │
│ ┌───────────────────────────────────────────┐ │
│ │ フォルダ構造          [新規フォルダ+]     │ │
│ ├───────────────────────────────────────────┤ │
│ │ 📁 ルート                                 │ │
│ │   ├─ 📁 Models (3)                       │ │
│ │   │   ├─ 📄 User.puml                    │ │
│ │   │   ├─ 📄 Project.puml                 │ │
│ │   │   └─ 📄 Diagram.puml                 │ │
│ │   └─ 📁 Views (2)                        │ │
│ │       ├─ 📄 Dashboard.puml               │ │
│ │       └─ 📄 Editor.puml                  │ │
│ └───────────────────────────────────────────┘ │
│                                                 │
│ ┌───────────────────────────────────────────┐ │
│ │ 図表一覧 (5/10)        [新規図表+]        │ │
│ ├───────────────────────────────────────────┤ │
│ │ ┌─────────┐ ┌─────────┐ ┌─────────┐    │ │
│ │ │ [thumb] │ │ [thumb] │ │ [thumb] │    │ │
│ │ │User.puml│ │Project  │ │Diagram  │    │ │
│ │ │クラス図 │ │ER図     │ │シーケンス│    │ │
│ │ │2日前    │ │3日前    │ │1週間前  │    │ │
│ │ └─────────┘ └─────────┘ └─────────┘    │ │
│ └───────────────────────────────────────────┘ │
└─────────────────────────────────────────────────┘
```

#### 必要な要素
- プロジェクト情報表示・編集
- フォルダツリー表示
- 図表一覧（グリッドまたはリスト表示）
- 各図表のサムネイル
- 新規作成ボタン
- 検索・フィルター機能

### 2.5 プラクティス問題画面（/practice/{id}）

#### レイアウト構成
```
┌─────────────────────────────────────────────────────────────┐
│ [Logo] PlantUML Editor  [Practice List] [Login/User Menu]  │
├─────────────────────────────────────────────────────────────┤
│  難易度: ★☆☆ 初級 | カテゴリ: クラス図                    │
│                                                             │
│  問題: 簡単なユーザークラスを作成                          │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│  以下の要件を満たすクラス図を作成してください：            │
│  • Userクラスを作成                                        │
│  • name (String型) プロパティを追加                        │
│  • email (String型) プロパティを追加                       │
│  • login() メソッドを追加                                  │
│                                                             │
│  [ヒントを見る]                                            │
├────────────────────────┬────────────────────────────────────┤
│                        │                                    │
│  Your Answer           │     Your Result                    │
│  (Monaco Editor)       │                                    │
│                        │  ┌──────────────────┐             │
│  @startuml             │  │                  │             │
│  class User {          │  │   [Your Diagram] │             │
│    ...                 │  │                  │             │
│  }                     │  └──────────────────┘             │
│  @enduml               │                                    │
│                        │  [提出] [正解を見る]               │
│                        │                                    │
├────────────────────────┴────────────────────────────────────┤
│ 進捗: 問題 3/10 | [前の問題] [次の問題] [一覧に戻る]       │
└─────────────────────────────────────────────────────────────┘
```

#### 正解表示時の追加要素
```
┌─────────────────────────────────────────────────────────────┐
│  正解例                │     正解の図                       │
├────────────────────────┼────────────────────────────────────┤
│  @startuml             │  ┌──────────────────┐             │
│  class User {          │  │                  │             │
│    -name: String       │  │ [Answer Diagram] │             │
│    -email: String      │  │                  │             │
│    +login(): boolean   │  └──────────────────┘             │
│  }                     │                                    │
│  @enduml               │  解説: privateプロパティには      │
│                        │  マイナス記号を使用します...       │
└────────────────────────┴────────────────────────────────────┘
```

### 2.6 チートシート画面（/cheatsheet）

#### レイアウト構成
```
┌─────────────────────────────────────────────────┐
│ [Logo] PlantUML Editor    [Editor] [User Menu] │
├─────────────────────────────────────────────────┤
│                                                 │
│  PlantUML チートシート                         │
│                                                 │
│  [クラス図] [シーケンス] [ER図] [状態図] [...]  │ <- タブ
│                                                 │
│ ┌───────────────────────────────────────────┐ │
│ │ クラス図の基本構文                        │ │
│ ├───────────────────────────────────────────┤ │
│ │ ■ クラス定義                              │ │
│ │   @startuml                                │ │
│ │   class ClassName {                        │ │
│ │     +publicField: Type                     │ │
│ │     -privateField: Type                    │ │
│ │     +publicMethod(): ReturnType            │ │
│ │   }                                        │ │
│ │   @enduml                                  │ │
│ │                                            │ │
│ │ ■ 関係性                                  │ │
│ │   継承: ClassA --|> ClassB                 │ │
│ │   実装: ClassA ..|> InterfaceB             │ │
│ │   関連: ClassA --> ClassB                  │ │
│ │   集約: ClassA o-- ClassB                  │ │
│ │   コンポジション: ClassA *-- ClassB        │ │
│ │                                            │ │
│ │ [サンプルを見る] [エディタで試す]         │ │
│ └───────────────────────────────────────────┘ │
└─────────────────────────────────────────────────┘
```

#### 必要な要素
- 図表タイプ別のタブ
- 各構文の説明と例
- コピー可能なコードスニペット
- エディタへの遷移リンク
- 検索機能

## 3. コンポーネント設計

### 3.1 共通コンポーネント

| コンポーネント名 | 説明 | 使用画面 |
|-----------------|------|----------|
| AppHeader | ヘッダーナビゲーション | 全画面 |
| UserMenu | ユーザーメニュードロップダウン | 認証後の全画面 |
| ProjectCard | プロジェクト情報カード | ダッシュボード |
| DiagramThumbnail | 図表サムネイル表示 | プロジェクト管理、ダッシュボード |
| MonacoEditor | コードエディタ | エディタ、プラクティス |
| DiagramPreview | 図表プレビュー | エディタ、プラクティス |
| ExportButtons | エクスポートボタン群 | エディタ |
| StatusBar | ステータス情報表示 | エディタ |
| ProgressBar | 進捗バー | プラクティス、ダッシュボード |
| Toast | 通知メッセージ | 全画面 |

### 3.2 レイアウトコンポーネント

| コンポーネント名 | 説明 | 子要素 |
|-----------------|------|--------|
| GuestLayout | ゲスト用レイアウト | Header, Content, Footer |
| AuthenticatedLayout | 認証済みユーザー用レイアウト | Header, Sidebar, Content |
| EditorLayout | エディタ専用レイアウト | Toolbar, Editor, Preview |
| SplitPane | 分割可能なペイン | Left Panel, Right Panel |

## 4. UI/UXガイドライン

### 4.1 カラーパレット

```css
:root {
  /* Primary Colors */
  --primary-500: #3B82F6;  /* Blue - メインアクション */
  --primary-600: #2563EB;  /* Blue Dark - ホバー時 */
  
  /* Secondary Colors */
  --secondary-500: #10B981;  /* Green - 成功、保存 */
  --secondary-600: #059669;  /* Green Dark */
  
  /* Neutral Colors */
  --gray-50: #F9FAFB;   /* 背景 */
  --gray-100: #F3F4F6;  /* カード背景 */
  --gray-500: #6B7280;  /* テキスト（サブ） */
  --gray-900: #111827;  /* テキスト（メイン） */
  
  /* Status Colors */
  --success: #10B981;  /* 成功 */
  --warning: #F59E0B;  /* 警告 */
  --error: #EF4444;    /* エラー */
  --info: #3B82F6;     /* 情報 */
}
```

### 4.2 タイポグラフィ

```css
/* Headings */
.h1 { font-size: 2.5rem; font-weight: 700; }
.h2 { font-size: 2rem; font-weight: 600; }
.h3 { font-size: 1.5rem; font-weight: 600; }

/* Body */
.body { font-size: 1rem; line-height: 1.5; }
.body-small { font-size: 0.875rem; }

/* Code */
.code { font-family: 'Monaco', 'Courier New', monospace; }
```

### 4.3 スペーシング

```css
/* Spacing Scale */
--space-xs: 0.25rem;  /* 4px */
--space-sm: 0.5rem;   /* 8px */
--space-md: 1rem;     /* 16px */
--space-lg: 1.5rem;   /* 24px */
--space-xl: 2rem;     /* 32px */
--space-2xl: 3rem;    /* 48px */
```

### 4.4 レスポンシブブレークポイント

```css
/* Breakpoints */
--mobile: 640px;   /* sm */
--tablet: 768px;   /* md */
--laptop: 1024px;  /* lg */
--desktop: 1280px; /* xl */
```

## 5. アクセシビリティ要件

### 5.1 基本要件
- WCAG 2.1 Level AA準拠
- キーボードナビゲーション対応
- スクリーンリーダー対応
- 適切なARIAラベル

### 5.2 キーボードショートカット

| ショートカット | アクション | 画面 |
|---------------|-----------|------|
| Ctrl/Cmd + S | 保存 | エディタ |
| Ctrl/Cmd + Enter | プレビュー更新 | エディタ |
| Ctrl/Cmd + E | エクスポート | エディタ |
| Ctrl/Cmd + / | コメントトグル | エディタ |
| F11 | フルスクリーン | エディタ |
| Esc | モーダルを閉じる | 全画面 |

### 5.3 フォーカス管理
- Tab順序の適切な設定
- フォーカスの可視化
- モーダル内でのフォーカストラップ

## 6. インタラクション設計

### 6.1 ローディング状態

```typescript
// ローディング状態の種類
enum LoadingState {
  IDLE = 'idle',
  LOADING = 'loading',
  SUCCESS = 'success',
  ERROR = 'error'
}

// 表示パターン
- Skeleton Screen（初回ロード時）
- Spinner（データ取得時）
- Progress Bar（ファイルアップロード時）
- Shimmer Effect（コンテンツ更新時）
```

### 6.2 エラーハンドリング

```typescript
// エラー表示パターン
interface ErrorDisplay {
  inline: boolean;      // フォーム内エラー
  toast: boolean;       // トースト通知
  modal: boolean;       // モーダル表示
  page: boolean;        // エラーページ遷移
}

// エラーメッセージ例
const errorMessages = {
  network: "ネットワークエラーが発生しました",
  validation: "入力内容を確認してください",
  permission: "この操作を行う権限がありません",
  notFound: "指定されたリソースが見つかりません"
};
```

### 6.3 アニメーション

```css
/* トランジション設定 */
.transition-fast { transition: all 0.15s ease; }
.transition-base { transition: all 0.3s ease; }
.transition-slow { transition: all 0.5s ease; }

/* アニメーションパターン */
- Fade In/Out（モーダル、トースト）
- Slide（サイドバー、ドロワー）
- Scale（ボタンホバー）
- Skeleton（ローディング）
```

## 7. モバイル対応設計

### 7.1 タッチ操作
- 最小タップ領域: 44x44px
- スワイプジェスチャー対応
- ピンチズーム（図表プレビュー）

### 7.2 画面向き対応
- Portrait/Landscape両対応
- エディタは横向き推奨表示

### 7.3 オフライン対応
- LocalStorageへの自動保存
- オフライン時の警告表示
- 再接続時の自動同期

---

**文書バージョン**: 1.0  
**作成日**: 2025年1月  
**最終更新日**: 2025年1月